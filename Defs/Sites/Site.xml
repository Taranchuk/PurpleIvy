<?xml version="1.0" encoding="utf-8" ?>
<Defs>

	<!--====== Incidents&Item Spawn ======-->

	<IncidentDef>
		<defName>ProceduralGeneration</defName>
		<label>Infested Settlement</label>
		<category>ThreatBig</category>
		<targetTags>
			<li>World</li>
		</targetTags>
		<workerClass>GenerationWorker.IncidentWorker_GenerationOffset</workerClass>
		<letterLabel>Infested Settlement</letterLabel>
		<letterText>{0}, {1} of {2}, has informed us that a nearby settlement was driven out of their home due to infestation. It catch them by surprise, so most valuables are still here. The settlement has some valuable items such as:\n\n{3}\n\nUnfortunately, the rumors fly fast so there will be nothing in {4} days if we don't hurry up.\n\nBeware - those insects are very aggressive. {0} says that {5}.</letterText>
		<letterDef>NeutralEvent</letterDef>
		<baseChance>2.0</baseChance>
	</IncidentDef>


	<!--====== Generation ======-->

	<SitePartDef>
		<defName>ProceduralOutpost</defName>
		<label>Infested Settlement</label>
		<description>An infested Settlement. This base hold a lot of valuable objects so you should prepare a good caravan consistent of a good fighters to drive bugs off and pack animals to carry all valuables this base can hold.</description>
		<workerClass>GenerationWorker.SitePartWorker_ProceduralGeneration</workerClass>
		<siteTexture>World/WorldObjects/Sites/Outpost</siteTexture>
		<expandingIconTexture>World/WorldObjects/Expanding/Sites/Outpost</expandingIconTexture>
		<applyFactionColorToSiteTexture>true</applyFactionColorToSiteTexture>
		<showFactionInInspectString>true</showFactionInInspectString>
		<requiresFaction>true</requiresFaction>
		<arrivedLetter>Be careful before trying to fight those blood hungry creatures. The best strategy in this case is to Wait and Observe.</arrivedLetter>
		<arrivedLetterDef>NeutralEvent</arrivedLetterDef>
		<wantsThreatPoints>true</wantsThreatPoints>
		<tags>
			<li>SiteTreatSecured</li>
		</tags>
	</SitePartDef>

	<GenStepDef>
		<defName>ProceduralOutpost</defName>
		<linkWithSite>ProceduralOutpost</linkWithSite>
		<order>450</order>
		<genStep Class="GenerationWorker.GenStep_AutoGeneratedOutpost"/>
	</GenStepDef>


	<GenStepDef>
		<defName>GenerationBasic</defName>
		<linkWithSite>ProceduralOutpost</linkWithSite>
		<order>470</order>
		<genStep Class="GenerationWorker.GenStep_BasicGeneration">
			<widthRange>
				<min>3</min>
				<max>4</max>
			</widthRange>
			<guardsCountRange>
				<min>0</min>
				<max>0</max>
			</guardsCountRange>
		</genStep>
	</GenStepDef>

	<SitePartDef>
		<defName>OldOutpost</defName>
		<label>Infested Settlement</label>
		<description>Beware the insects in this area are very aggressive.</description>
		<siteTexture>WorldIcons/Site/OutpostSettlement</siteTexture>
		<expandingIconTexture>WorldIcons/Site/Outpost</expandingIconTexture>
	</SitePartDef>

	<GenStepDef>
		<defName>ItemGeneration</defName>
		<linkWithSite>OldOutpost</linkWithSite>
		<order>460</order>
		<genStep Class="GenerationWorker.GenStep_ItemGeneration">
			<count>1</count>
			<nearMapCenter>true</nearMapCenter>
		</genStep>
	</GenStepDef>

	<GenStepDef>
		<defName>CavesGen</defName>
		<linkWithSite>OldOutpost</linkWithSite>
		<order>11</order>
		<genStep Class="GenStep_Caves"/>
	</GenStepDef>

	<GenStepDef>
		<defName>GenerationRuin</defName>
		<linkWithSite>OldOutpost</linkWithSite>
		<order>300</order>
		<genStep Class="GenStep_ScatterRuinsSimple">
			<allowInWaterBiome>false</allowInWaterBiome>
			<countPer10kCellsRange>
				<min>20</min>
				<max>25</max>
			</countPer10kCellsRange>
		</genStep>
	</GenStepDef>

</Defs>